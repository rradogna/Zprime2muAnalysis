#!/usr/bin/env python

# (py resfromdy.py >! plots/out.resfromdy) && tlp plots/*resfromdy

import os
import ROOT
import math
from array import array
from ROOT import *
#from SUSYBSMAnalysis.Zprime2muAnalysis.roottools import *
##set_zp2mu_style()
#ROOT.gStyle.SetOptFit(11)
#gStyle.SetOptStat("eMRuo")
gStyle.SetOptStat("")

ROOT.gStyle.SetPadTopMargin(0.02)
ROOT.gStyle.SetPadRightMargin(0.02)
###################################################################
def projectAndFit(Histo2D, postFix = "none"):
    nx    = Histo2D.GetNbinsX()
    print nx
    htmp= Histo2D.ProfileX()
    print htmp.GetNbinsX()
    x1    = htmp.GetBinLowEdge(1)
    bw    = htmp.GetBinWidth(nx)
    x2    = htmp.GetBinLowEdge(nx)+bw
    h2 = ROOT.TH1D((postFix + "Sigma"),(postFix + "Sigma"),nx, x1, x2)
    for i in xrange(1, Histo2D.GetNbinsX()+1):
        proj = Histo2D.ProjectionY("proj_%.d" %i,i,i)
        if proj.GetEntries() != 0:
            print "%.d orario" %i
            func = TF1("func_%.d" %i,"gaus", -0.03, 0.03)
            proj.Fit("func_%.d" %i, 'R')
            h2.SetBinContent(i,func.GetParameter(2))
            h2.SetBinError(i,func.GetParError(2))
    return h2
def projectAndFitCumulative_m(Histo2D, postFix = "none"):
    nx    = Histo2D.GetNbinsX()
    print nx
    htmp= Histo2D.ProfileX()
    print htmp.GetNbinsX()
    x1    = htmp.GetBinLowEdge(1)
    bw    = htmp.GetBinWidth(nx)
    x2    = htmp.GetBinLowEdge(nx)+bw
    h2 = ROOT.TH1D((postFix + "Sigma"),(postFix + "Sigma"),nx, x1, x2)
    for i in xrange(1, Histo2D.GetNbinsX()+1):
        proj = Histo2D.ProjectionY("proj_%.d" %i,1,i)
        if proj.GetEntries() != 0:
            print "%.d cumulativo < cut" %i
            func = TF1("func_%.d" %i,"gaus",  -0.03, 0.03)
            proj.Fit("func_%.d" %i, 'R')
            h2.SetBinContent(i,func.GetParameter(2))
            h2.SetBinError(i,func.GetParError(2))
    return h2

def projectAndFitCumulative_M(Histo2D, postFix = "none"):
    nx    = Histo2D.GetNbinsX()
    print nx
    htmp= Histo2D.ProfileX()
    print htmp.GetNbinsX()
    x1    = htmp.GetBinLowEdge(1)
    bw    = htmp.GetBinWidth(nx)
    x2    = htmp.GetBinLowEdge(nx)+bw
    h2 = ROOT.TH1D((postFix + "Sigma"),(postFix + "Sigma"),nx, x1, x2)
    for i in xrange(1, Histo2D.GetNbinsX()+1):
        proj = Histo2D.ProjectionY("proj_%.d" %i,i,nx+1)
        if proj.GetEntries() != 0:
            print "%.d cumulativo < cut" %i
            func = TF1("func_%.d" %i,"gaus",  -0.03, 0.03)
            proj.Fit("func_%.d" %i, 'R')
            h2.SetBinContent(i,func.GetParameter(2))
            h2.SetBinError(i,func.GetParError(2))
    return h2

def projectAndMeanCumulative_M(Histo2D, postFix = "none"):
    nx    = Histo2D.GetNbinsX()
    print nx
    htmp= Histo2D.ProfileX()
    print htmp.GetNbinsX()
    x1    = htmp.GetBinLowEdge(1)
    bw    = htmp.GetBinWidth(nx)
    x2    = htmp.GetBinLowEdge(nx)+bw
    h2 = ROOT.TH1D((postFix + "Mean"),(postFix + "Mean"),nx, x1, x2)
    for i in xrange(1, Histo2D.GetNbinsX()+1):
        proj = Histo2D.ProjectionY("proj_%.d" %i,i,nx+1)
        if proj.GetEntries() != 0:
            print "%.d cumulativo < cut" %i
            h2.SetBinContent(i,proj.GetMean())
            h2.SetBinError(i,proj.GetMeanError())
    return h2

def projectAndRMSCumulative_M(Histo2D, postFix = "none"):
    nx    = Histo2D.GetNbinsX()
    print nx
    htmp= Histo2D.ProfileX()
    print htmp.GetNbinsX()
    x1    = htmp.GetBinLowEdge(1)
    bw    = htmp.GetBinWidth(nx)
    x2    = htmp.GetBinLowEdge(nx)+bw
    h2 = ROOT.TH1D((postFix + "RMS"),(postFix + "RMS"),nx, x1, x2)
    for i in xrange(1, Histo2D.GetNbinsX()+1):
        proj = Histo2D.ProjectionY("proj_%.d" %i,i,nx+1)
        if proj.GetEntries() != 0:
            print "%.d cumulativo < cut" %i
            h2.SetBinContent(i,proj.GetRMS())
            h2.SetBinError(i,proj.GetRMSError())
    return h2

def PaintOverflow(h, opt=''):
    #This function paint the histogram h with an extra bin for overflows
    name  = h.GetName()
    print name
    title = h.GetTitle()
    nx    = h.GetNbinsX()+1
    x1    = h.GetBinLowEdge(1)
    bw    = h.GetBinWidth(nx)
    x2    = h.GetBinLowEdge(nx)+bw
    print nx, x1, bw, x2
    htmp  = ROOT.TH1F(name, title, nx, x1, x2)
    for i in xrange(1, nx+1):
        htmp.Fill(htmp.GetBinCenter(i), h.GetBinContent(i))
    #print h.GetBinContent(i)
    htmp.Fill(x1-1, h.GetBinContent(0))
    htmp.SetEntries(h.GetEntries())
    return htmp

def Eff(h, opt=''):
    #This function paint the histogram h with an extra bin for overflows
    name  = h.GetName()
    print name
    title = h.GetTitle()
    nx    = h.GetNbinsX()
    x1    = h.GetBinLowEdge(1)
    bw    = h.GetBinWidth(nx)
    x2    = h.GetBinLowEdge(nx)+bw
    print nx, x1, bw, x2
    htmp_n  = ROOT.TH1F(name + "_num", title, nx+1, x1, x2+bw)
    htmp_d  = ROOT.TH1F(name + "_den", title, nx+1, x1, x2+bw)
    print htmp_n.GetName(), htmp_d.GetName(), htmp_n.GetNbinsX(), htmp_n.GetBinLowEdge(1), htmp_n.GetBinWidth(htmp_n.GetNbinsX())
    for i in xrange(1, nx+2):
        print "bin ", i, " chi< ",i*bw, "bin content: ", int(h.Integral(0,i)), "total: ",int(h.Integral(0,nx+1)), "eff: ", h.Integral(0,i)/h.Integral(0,nx+1)
        for n in xrange(1, int(h.Integral(0,i))+1):
            htmp_n.Fill(i*bw-bw)
        print htmp_n.GetBinContent(i)
        for d in xrange(1, int(h.Integral(0,nx+1))+1):
            htmp_d.Fill(i*bw-bw)
        print htmp_d.GetBinContent(i)
    
    htmp_n.Sumw2()
    htmp_d.Sumw2()
    if(ROOT.TEfficiency.CheckConsistency(htmp_n,htmp_d)):
        htmp = ROOT.TEfficiency(htmp_n,htmp_d)
    #print h.GetBinContent(i)
    return htmp
###################################################################
f1tev_at8tev = ROOT.TFile('./files/zp2mu_dy120_8MassRange.root')
d1tev_at8tev = f1tev_at8tev.ResolutionVertexUsingMC
h1tev_at8tev_MassReco = d1tev_at8tev.Get('DileptonMassReco')
h1tev_at8tev_MassGen = d1tev_at8tev.Get('DileptonMassGen')

h1tev_at8tev_PtBB = d1tev_at8tev.Get('LeptonPt_BarrelBarrel')
h1tev_at8tev_PtEE = d1tev_at8tev.Get('LeptonPt_EndcapEndcap')
h1tev_at8tev_PtEB = d1tev_at8tev.Get('LeptonPt_EndcapBarrel')

h1tev_at8tev_PtResBB = d1tev_at8tev.Get('LeptonPtRes_BarrelBarrel')
h1tev_at8tev_PtResEE = d1tev_at8tev.Get('LeptonPtRes_EndcapEndcap')
h1tev_at8tev_PtResEB = d1tev_at8tev.Get('LeptonPtRes_EndcapBarrel')

h1tev_at8tev_InvPtResBB = d1tev_at8tev.Get('LeptonInvPtRes_BarrelBarrel')
h1tev_at8tev_InvPtResEE = d1tev_at8tev.Get('LeptonInvPtRes_EndcapEndcap')
h1tev_at8tev_InvPtResEB = d1tev_at8tev.Get('LeptonInvPtRes_EndcapBarrel')

h1tev_at8tev_PtPullBB = d1tev_at8tev.Get('LeptonPtPull_BarrelBarrel')
h1tev_at8tev_PtPullEE = d1tev_at8tev.Get('LeptonPtPull_EndcapEndcap')
h1tev_at8tev_PtPullEB = d1tev_at8tev.Get('LeptonPtPull_EndcapBarrel')

h1tev_at8tev_MresBB = d1tev_at8tev.Get('DileptonMassRes_BarrelBarrel')
h1tev_at8tev_MresEE = d1tev_at8tev.Get('DileptonMassRes_EndcapEndcap')
h1tev_at8tev_MresEB = d1tev_at8tev.Get('DileptonMassRes_EndcapBarrel')

h1tev_at8tev_PtResVStrkprob = d1tev_at8tev.Get('LeptonPtResVSMuonPtProb')
h1tev_at8tev_InvPtResVStrkprob = d1tev_at8tev.Get('LeptonInvPtResVSMuonPtProb')
h1tev_at8tev_MassResVStrkprob = d1tev_at8tev.Get('DileptonMassResVSMuonPtProb')

h1tev_at8tev_PtResVSvtxChi2 = d1tev_at8tev.Get('LeptonPtResVSvtxChi2')
h1tev_at8tev_InvPtResVSvtxChi2 = d1tev_at8tev.Get('LeptonInvPtResVSvtxChi2')
h1tev_at8tev_MassResVSvtxChi2 = d1tev_at8tev.Get('DileptonMassResVSvtxChi2')

###################################################################
f1tev_at13tev = ROOT.TFile('./files/zp2mu_dy120_13MassRange.root')
d1tev_at13tev = f1tev_at13tev.ResolutionVertexUsingMC

h1tev_at13tev_MassReco = d1tev_at13tev.Get('DileptonMassReco')
h1tev_at13tev_MassGen = d1tev_at13tev.Get('DileptonMassGen')

h1tev_at13tev_PtBB = d1tev_at13tev.Get('LeptonPt_BarrelBarrel')
h1tev_at13tev_PtEE = d1tev_at13tev.Get('LeptonPt_EndcapEndcap')
h1tev_at13tev_PtEB = d1tev_at13tev.Get('LeptonPt_EndcapBarrel')

h1tev_at13tev_PtResBB = d1tev_at13tev.Get('LeptonPtRes_BarrelBarrel')
h1tev_at13tev_PtResEE = d1tev_at13tev.Get('LeptonPtRes_EndcapEndcap')
h1tev_at13tev_PtResEB = d1tev_at13tev.Get('LeptonPtRes_EndcapBarrel')

h1tev_at13tev_InvPtResBB = d1tev_at13tev.Get('LeptonInvPtRes_BarrelBarrel')
h1tev_at13tev_InvPtResEE = d1tev_at13tev.Get('LeptonInvPtRes_EndcapEndcap')
h1tev_at13tev_InvPtResEB = d1tev_at13tev.Get('LeptonInvPtRes_EndcapBarrel')

h1tev_at13tev_PtPullBB = d1tev_at13tev.Get('LeptonPtPull_BarrelBarrel')
h1tev_at13tev_PtPullEE = d1tev_at13tev.Get('LeptonPtPull_EndcapEndcap')
h1tev_at13tev_PtPullEB = d1tev_at13tev.Get('LeptonPtPull_EndcapBarrel')

h1tev_at13tev_MresBB = d1tev_at13tev.Get('DileptonMassRes_BarrelBarrel')
h1tev_at13tev_MresEE = d1tev_at13tev.Get('DileptonMassRes_EndcapEndcap')
h1tev_at13tev_MresEB = d1tev_at13tev.Get('DileptonMassRes_EndcapBarrel')

h1tev_at13tev_MresEB = d1tev_at13tev.Get('DileptonMassRes_EndcapBarrel')

h1tev_at13tev_PtResVStrkprob = d1tev_at13tev.Get('LeptonPtResVSMuonPtProb')
h1tev_at13tev_InvPtResVStrkprob = d1tev_at13tev.Get('LeptonInvPtResVSMuonPtProb')
h1tev_at13tev_MassResVStrkprob = d1tev_at13tev.Get('DileptonMassResVSMuonPtProb')

h1tev_at13tev_PtResVSvtxChi2 = d1tev_at13tev.Get('LeptonPtResVSvtxChi2')
h1tev_at13tev_InvPtResVSvtxChi2 = d1tev_at13tev.Get('LeptonInvPtResVSvtxChi2')
h1tev_at13tev_MassResVSvtxChi2 = d1tev_at13tev.Get('DileptonMassResVSvtxChi2')

h1tev_at13tev_dxyVSvtxChi2 = d1tev_at13tev.Get('LeptonRecoGenDxyVSvtxChi2')
h1tev_at13tev_dzVSvtxChi2 = d1tev_at13tev.Get('LeptonRecoGenDzVSvtxChi2')

###############
nGen_8tev=99984.
nGen_13tev=30389.
print "nGen_8tev", nGen_8tev
print "nGen_13tev", nGen_13tev
###############
par=[0,0]
parPull=[0,0,0,0]

c_mass = ROOT.TCanvas( 'c_mass', '')
print "GEN: ",h1tev_at13tev_MassGen.GetEntries(), "RECO: ",h1tev_at13tev_MassReco.GetEntries()
h1tev_at13tev_MassReco.Scale(1/nGen_13tev)
h1tev_at13tev_MassGen.Scale(1/nGen_13tev)
h1tev_at13tev_MassReco.Rebin(10)
h1tev_at13tev_MassGen.Rebin(10)
h1tev_at13tev_MassReco.SetLineColor(2)
h1tev_at13tev_MassReco.SetLineWidth(2)
h1tev_at13tev_MassGen.SetLineColor(6)
h1tev_at13tev_MassGen.SetLineWidth(2)
h1tev_at13tev_MassGen.GetXaxis().SetRangeUser(0, 1000)
h1tev_at13tev_MassReco.GetXaxis().SetRangeUser(0, 1000)
h1tev_at13tev_MassGen.Draw('histo')
h1tev_at13tev_MassReco.Draw('same histo')
tM = ROOT.TLatex(0.65, 0.5, '#splitline{DY 120 GeV}{#splitline{Reco Entries = %.0f }{Gen Entries =%.0f }}' %tuple([h1tev_at13tev_MassReco.GetEntries(),h1tev_at13tev_MassGen.GetEntries()]) )
tM.SetNDC()
tM.Draw()
c_mass.Print('ABSDY120RES_massRG.pdf')


#c_PtresVSprob = ROOT.TCanvas( 'c_PtresVSprob', '')
#h1tev_at13tev_PtResVStrkprob.Rebin2D(50,1)
#h1tev_at8tev_PtResVStrkprob.Rebin2D(50,1)
#hPtResVStrkprob_13tev=projectAndFit(h1tev_at13tev_PtResVStrkprob,'PtResVStrkprob_13tev')
#hPtResVStrkprob_8tev=projectAndFit(h1tev_at8tev_PtResVStrkprob, 'PtResVStrkprob_8tev')
#hPtResVStrkprob_13tev.SetLineColor(2)
#hPtResVStrkprob_13tev.SetLineWidth(2)
#hPtResVStrkprob_8tev.SetLineColor(1)
#hPtResVStrkprob_8tev.SetLineWidth(2)
#hPtResVStrkprob_13tev.SetMaximum(0.03)
#hPtResVStrkprob_13tev.SetMinimum(0.005)
#hPtResVStrkprob_13tev.Draw()
#hPtResVStrkprob_8tev.Draw('same')
#c_PtresVSprob.Print('ABSDY120RES_PtresVSprob.pdf')
#
#c_InvPtresVSprob = ROOT.TCanvas( 'c_InvPtresVSprob', '')
#h1tev_at13tev_InvPtResVStrkprob.Rebin2D(50,1)
#h1tev_at8tev_InvPtResVStrkprob.Rebin2D(50,1)
#hInvPtResVStrkprob_13tev=projectAndFit(h1tev_at13tev_InvPtResVStrkprob,'InvPtResVStrkprob_13tev')
#hInvPtResVStrkprob_8tev=projectAndFit(h1tev_at8tev_InvPtResVStrkprob, 'InvPtResVStrkprob_8tev')
#hInvPtResVStrkprob_13tev.SetLineColor(2)
#hInvPtResVStrkprob_13tev.SetLineWidth(2)
#hInvPtResVStrkprob_8tev.SetLineColor(1)
#hInvPtResVStrkprob_8tev.SetLineWidth(2)
#hInvPtResVStrkprob_13tev.SetMaximum(0.03)
#hInvPtResVStrkprob_13tev.SetMinimum(0.005)
#hInvPtResVStrkprob_13tev.Draw()
#hInvPtResVStrkprob_8tev.Draw('same')
#c_InvPtresVSprob.Print('ABSDY120RES_InvPtresVSprob.pdf')
#
#c_MresVSprob = ROOT.TCanvas( 'c_MresVSprob', '')
#h1tev_at13tev_MassResVStrkprob.Rebin2D(50,1)
#h1tev_at8tev_MassResVStrkprob.Rebin2D(50,1)
#hMResVStrkprob_13tev=projectAndFit(h1tev_at13tev_MassResVStrkprob,'MResVStrkprob_13tev')
#hMResVStrkprob_8tev=projectAndFit(h1tev_at8tev_MassResVStrkprob, 'MResVStrkprob_8tev')
#hMResVStrkprob_13tev.SetLineColor(2)
#hMResVStrkprob_13tev.SetLineWidth(2)
#hMResVStrkprob_8tev.SetLineColor(1)
#hMResVStrkprob_8tev.SetLineWidth(2)
#hMResVStrkprob_13tev.SetMaximum(0.03)
#hMResVStrkprob_13tev.SetMinimum(0.005)
#hMResVStrkprob_13tev.Draw()
#hMResVStrkprob_8tev.Draw('same')
#c_MresVSprob.Print('ABSDY120RES_MresVSprob.pdf')

c_MresVSchi = ROOT.TCanvas( 'c_MresVSchi', '')
c_MresVSchi.SetGridy()
h1tev_at13tev_MassResVSvtxChi2.Rebin2D(5,1)
h1tev_at8tev_MassResVSvtxChi2.Rebin2D(5,1)
hMResVSvtxChi2_13tev=projectAndFitCumulative_m(h1tev_at13tev_MassResVSvtxChi2,'MResVSvtxChi2_13tev')
hMResVSvtxChi2_8tev=projectAndFitCumulative_m(h1tev_at8tev_MassResVSvtxChi2, 'MResVSvtxChi2_8tev')
hMResVSvtxChi2_13tev.SetLineColor(38)
hMResVSvtxChi2_13tev.SetLineWidth(2)
hMResVSvtxChi2_8tev.SetLineColor(1)
hMResVSvtxChi2_8tev.SetLineWidth(2)
hMResVSvtxChi2_13tev.SetMaximum(0.015)
hMResVSvtxChi2_13tev.SetMinimum(0.012)
hMResVSvtxChi2_13tev.GetXaxis().SetRangeUser(0,30)
hMResVSvtxChi2_8tev.GetXaxis().SetRangeUser(0,30)
hMResVSvtxChi2_13tev.GetXaxis().SetTitle("#chi^{2}/dof")
hMResVSvtxChi2_13tev.GetYaxis().SetTitle("dilepton (#chi^{2}/dof<cut) relative mass resolution ")
hMResVSvtxChi2_13tev.GetYaxis().SetTitleOffset(1.5);
hMResVSvtxChi2_13tev.Draw()
#hMResVSvtxChi2_8tev.Draw('same')
c_MresVSchi.Print('ABSDY120RES_MresVSchi_m.pdf')

c_MresVSchi = ROOT.TCanvas( 'c_MresVSchi', '')
c_MresVSchi.SetGridy()
hMResVSvtxChi2_13tevM=projectAndFitCumulative_M(h1tev_at13tev_MassResVSvtxChi2,'MResVSvtxChi2_13tevM')
hMResVSvtxChi2_8tevM=projectAndFitCumulative_M(h1tev_at8tev_MassResVSvtxChi2, 'MResVSvtxChi2_8tevM')
hMResVSvtxChi2_13tevM.SetLineColor(38)
hMResVSvtxChi2_13tevM.SetLineWidth(2)
hMResVSvtxChi2_8tevM.SetLineColor(1)
hMResVSvtxChi2_8tevM.SetLineWidth(2)
#hMResVSvtxChi2_13tev.SetMaximum(0.065)
#hMResVSvtxChi2_13tev.SetMinimum(0.04)
#hMResVSvtxChi2_13tevM.SetMaximum(0.047)
#hMResVSvtxChi2_13tevM.SetMinimum(0.04)
hMResVSvtxChi2_13tevM.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_8tevM.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_13tevM.GetXaxis().SetTitle("#chi^{2}/dof")
hMResVSvtxChi2_13tevM.GetYaxis().SetTitle("dilepton (#chi^{2}/dof>cut) relative mass resolution ")
hMResVSvtxChi2_13tevM.GetYaxis().SetTitleOffset(1.5);
hMResVSvtxChi2_13tevM.Draw()
#hMResVSvtxChi2_8tevM.Draw('same')
c_MresVSchi.Print('ABSDY120RES_MresVSchi_M.pdf')

c_MresVSchi = ROOT.TCanvas( 'c_MresVSchi', '')
c_MresVSchi.SetGridy()
hMResVSvtxChi2_13tevMRMS=projectAndRMSCumulative_M(h1tev_at13tev_MassResVSvtxChi2,'MResVSvtxChi2_13tevMRMS')
hMResVSvtxChi2_8tevMRMS=projectAndRMSCumulative_M(h1tev_at8tev_MassResVSvtxChi2, 'MResVSvtxChi2_8tevMRMS')
hMResVSvtxChi2_13tevMRMS.SetLineColor(38)
hMResVSvtxChi2_13tevMRMS.SetLineWidth(2)
hMResVSvtxChi2_8tevMRMS.SetLineColor(1)
hMResVSvtxChi2_8tevMRMS.SetLineWidth(2)
#hMResVSvtxChi2_13tev.SetMaximum(0.065)
#hMResVSvtxChi2_13tev.SetMinimum(0.04)
#hMResVSvtxChi2_13tevM.SetMaximum(0.047)
#hMResVSvtxChi2_13tevM.SetMinimum(0.04)
hMResVSvtxChi2_13tevMRMS.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_8tevMRMS.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_13tevMRMS.GetXaxis().SetTitle("#chi^{2}/dof")
hMResVSvtxChi2_13tevMRMS.GetYaxis().SetTitle("dilepton (#chi^{2}/dof>cut) relative mass resolution RMS ")
hMResVSvtxChi2_13tevMRMS.GetYaxis().SetTitleOffset(1.5);
hMResVSvtxChi2_13tevMRMS.Draw()
#hMResVSvtxChi2_8tevM.Draw('same')
c_MresVSchi.Print('ABSDY120RES_MresRMSVSchi_M.pdf')

c_MresVSchi = ROOT.TCanvas( 'c_MresVSchi', '')
c_MresVSchi.SetGridy()
hMResVSvtxChi2_13tevMMean=projectAndMeanCumulative_M(h1tev_at13tev_MassResVSvtxChi2,'MResVSvtxChi2_13tevMMean')
hMResVSvtxChi2_8tevMMean=projectAndMeanCumulative_M(h1tev_at8tev_MassResVSvtxChi2, 'MResVSvtxChi2_8tevMMean')
hMResVSvtxChi2_13tevMMean.SetLineColor(38)
hMResVSvtxChi2_13tevMMean.SetLineWidth(2)
hMResVSvtxChi2_8tevMMean.SetLineColor(1)
hMResVSvtxChi2_8tevMMean.SetLineWidth(2)
#hMResVSvtxChi2_13tev.SetMaximum(0.065)
#hMResVSvtxChi2_13tev.SetMinimum(0.04)
#hMResVSvtxChi2_13tevM.SetMaximum(0.047)
#hMResVSvtxChi2_13tevM.SetMinimum(0.04)
hMResVSvtxChi2_13tevMMean.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_8tevMMean.GetXaxis().SetRangeUser(0,25)
hMResVSvtxChi2_13tevMMean.GetXaxis().SetTitle("#chi^{2}/dof")
hMResVSvtxChi2_13tevMMean.GetYaxis().SetTitle("dilepton (#chi^{2}/dof>cut) relative mass resolution Mean ")
hMResVSvtxChi2_13tevMMean.GetYaxis().SetTitleOffset(1.5);
hMResVSvtxChi2_13tevMMean.Draw()
#hMResVSvtxChi2_8tevM.Draw('same')
c_MresVSchi.Print('ABSDY120RES_MresMeanVSchi_M.pdf')

c_chi = ROOT.TCanvas( 'c_chi', '')
c_chi.SetLogy()
h1tev_at13tev_MassResVSvtxChi2.Rebin2D(1,1)
h1tev_at8tev_MassResVSvtxChi2.Rebin2D(1,1)
h1tev_at13tev_Chi2= h1tev_at13tev_MassResVSvtxChi2.ProjectionX("h1tev_at13tev_Chi2",0,101)
h1tev_at8tev_Chi2= h1tev_at8tev_MassResVSvtxChi2.ProjectionX("h1tev_at8tev_Chi2",0,101)
print "******** CHI entries ",h1tev_at13tev_Chi2.GetEntries()
h1tev_at8tev_Chi2_overf = PaintOverflow(h1tev_at8tev_Chi2)
h1tev_at13tev_Chi2_overf = PaintOverflow(h1tev_at13tev_Chi2)
h1tev_at8tev_Chi2_overf.Scale(1/nGen_8tev)
h1tev_at13tev_Chi2_overf.Scale(1/nGen_13tev)
h1tev_at13tev_Chi2_overf.SetLineColor(38)
h1tev_at13tev_Chi2_overf.SetLineWidth(2)
h1tev_at8tev_Chi2_overf.SetLineColor(1)
h1tev_at8tev_Chi2_overf.SetLineWidth(2)
h1tev_at8tev_Chi2_overf.Draw()
h1tev_at13tev_Chi2_overf.Draw('same')
leg = ROOT.TLegend( 0.55, 0.75, 0.9, 0.9 )
leg.SetFillColor(kWhite)
leg.SetLineColor(kWhite)
leg.SetTextSize(0.03)
leg.AddEntry(h1tev_at8tev_Chi2_overf, " DY 120GeV @ 8TeV", "L")
leg.AddEntry(h1tev_at13tev_Chi2_overf, " DY 120GeV @ 13TeV", "L")
leg.Draw('same')
c_chi.Print('ABSDY120RES_chi.pdf')

c_chiCut = ROOT.TCanvas( 'c_chiCut', '')
c_chiCut.SetGridy()
heff_13=Eff(h1tev_at13tev_Chi2)
heff_8=Eff(h1tev_at8tev_Chi2)
heff_13.SetLineColor(38)
heff_13.SetLineWidth(2)
heff_8.SetLineColor(1)
heff_8.SetLineWidth(2)
heff_13.Draw()
heff_8.Draw('same')
c_chiCut.Print('ABSDY120RES_chiCut.pdf')

c_MRes_Slice = ROOT.TCanvas( 'c_MRes_Slice', '')
pad1 = TPad( 'pad1', '', 0.02, 0.67, 0.32, 0.99)
pad2 = TPad( 'pad2', '', 0.34, 0.67, 0.66, 0.99)
pad3 = TPad( 'pad3', '', 0.67, 0.67, 0.99, 0.99)
pad4 = TPad( 'pad4', '', 0.02, 0.34, 0.32, 0.66)
pad5 = TPad( 'pad5', '', 0.34, 0.34, 0.66, 0.66)
pad6 = TPad( 'pad6', '', 0.67, 0.34, 0.99, 0.66)
pad7 = TPad( 'pad7', '', 0.02, 0.02, 0.32, 0.32)
pad8 = TPad( 'pad8', '', 0.34, 0.02, 0.66, 0.32)
pad9 = TPad( 'pad9', '', 0.67, 0.02, 0.99, 0.32)
pad1.Draw()
pad2.Draw()
pad3.Draw()
pad4.Draw()
pad5.Draw()
pad6.Draw()
pad7.Draw()
pad8.Draw()
pad9.Draw()
pad1.cd()
#pad1.SetLogy()
h1tev_at13tev_Mres0_3= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres0_3",0,6)
h1tev_at13tev_Mres0_3.SetLineColor(38)
h1tev_at13tev_Mres0_3.SetLineWidth(2)
Mres0_3 = TF1("Mres0_3","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres0_3.Fit('Mres0_3', 'R')
h1tev_at13tev_Mres0_3.Draw("histo")
h1tev_at13tev_Mres0_3.GetXaxis().SetTitle("dil. M rel. resolution")
Mres0_3.SetLineColor(4)
Mres0_3.SetLineWidth(1)
Mres0_3.Draw("same")
par[0]=float(h1tev_at13tev_Mres0_3.GetRMS())
par[1]=float(Mres0_3.GetParameter(2))
tMres0_3 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 0 #divide 3')
#tMres0_3 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: 0 #divide 3}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
#tMres0_3 = ROOT.TLatex(0.15, 0.6, '#splitline{#splitline{#splitline{#chi^{2}/dof: 0 #divide 3}{RMS=%.3f} }{#splitline{Underflow=%.1f}{Overflow=%.1f} } }{#splitline{Mean=%.3f}{#sigma=%.3f}}' %tuple([h1tev_at13tev_Mres0_3.GetRMS(),h1tev_at13tev_Mres0_3.GetBinContent(0),h1tev_at13tev_Mres0_3.GetBinContent(1000000),Mres0_3.GetParameter(1),Mres0_3.GetParameter(2)]))
tMres0_3.SetNDC()
tMres0_3.Draw()
pad2.cd()
h1tev_at13tev_Mres3_5= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres3_5",7,10)
h1tev_at13tev_Mres3_5.SetLineColor(38)
h1tev_at13tev_Mres3_5.SetLineWidth(2)
Mres3_5 = TF1("Mres3_5","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres3_5.Fit('Mres3_5', 'R')
h1tev_at13tev_Mres3_5.Draw("histo")
h1tev_at13tev_Mres3_5.GetXaxis().SetTitle("dil. M rel. resolution")
Mres3_5.SetLineColor(4)
Mres3_5.SetLineWidth(1)
Mres3_5.Draw("same")
par[0]=float(h1tev_at13tev_Mres3_5.GetRMS())
par[1]=float(Mres3_5.GetParameter(2))
tMres3_5 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 3 #divide 5')
#tMres3_5 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: 3 #divide 5}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres3_5.SetNDC()
tMres3_5.Draw()
pad3.cd()
h1tev_at13tev_Mres5_10= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres5_10",11,20)
h1tev_at13tev_Mres5_10.SetLineColor(38)
h1tev_at13tev_Mres5_10.SetLineWidth(2)
Mres5_10 = TF1("Mres5_10","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres5_10.Fit('Mres5_10', 'R')
h1tev_at13tev_Mres5_10.Draw("histo")
h1tev_at13tev_Mres5_10.GetXaxis().SetTitle("dil. M rel. resolution")
Mres5_10.SetLineColor(4)
Mres5_10.SetLineWidth(1)
Mres5_10.Draw("same")
par[0]=float(h1tev_at13tev_Mres5_10.GetRMS())
par[1]=float(Mres5_10.GetParameter(2))
tMres5_10 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 5 #divide 10')
#tMres5_10 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: 5 #divide 10}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres5_10.SetNDC()
tMres5_10.Draw()
pad4.cd()
h1tev_at13tev_Mres10_15= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres10_15",21,30)
h1tev_at13tev_Mres10_15.SetLineColor(38)
h1tev_at13tev_Mres10_15.SetLineWidth(2)
Mres10_15 = TF1("Mres10_15","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres10_15.Fit('Mres10_15', 'R')
h1tev_at13tev_Mres10_15.Draw("histo")
h1tev_at13tev_Mres10_15.GetXaxis().SetTitle("dil. M rel. resolution")
Mres10_15.SetLineColor(4)
Mres10_15.SetLineWidth(1)
Mres10_15.Draw("same")
par[0]=float(h1tev_at13tev_Mres10_15.GetRMS())
par[1]=float(Mres10_15.GetParameter(2))
tMres10_15 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 10 #divide 15')
#tMres10_15 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: 10 #divide 15}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres10_15.SetNDC()
tMres10_15.Draw()
pad5.cd()
h1tev_at13tev_Mres15_20= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres15_20",31,40)
h1tev_at13tev_Mres15_20.SetLineColor(38)
h1tev_at13tev_Mres15_20.SetLineWidth(2)
Mres15_20 = TF1("Mres15_20","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres15_20.Fit('Mres15_20', 'R')
h1tev_at13tev_Mres15_20.Draw("histo")
h1tev_at13tev_Mres15_20.GetXaxis().SetTitle("dil. M rel. resolution")
Mres15_20.SetLineColor(4)
Mres15_20.SetLineWidth(1)
Mres15_20.Draw("same")
par[0]=float(h1tev_at13tev_Mres15_20.GetRMS())
par[1]=float(Mres15_20.GetParameter(2))
tMres15_20 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 15 #divide 20')
#tMres15_20 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: 15 #divide 20}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres15_20.SetNDC()
tMres15_20.Draw()
pad6.cd()
h1tev_at13tev_Mres20_30= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres20_30",41,61)
h1tev_at13tev_Mres20_30.SetLineColor(38)
h1tev_at13tev_Mres20_30.SetLineWidth(2)
Mres20_30 = TF1("Mres20_30","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres20_30.Fit('Mres20_30', 'R')
h1tev_at13tev_Mres20_30.Draw("histo")
h1tev_at13tev_Mres20_30.GetXaxis().SetTitle("dil. M rel. resolution")
Mres20_30.SetLineColor(4)
Mres20_30.SetLineWidth(1)
Mres20_30.Draw("same")
par[0]=float(h1tev_at13tev_Mres20_30.GetRMS())
par[1]=float(Mres20_30.GetParameter(2))
tMres20_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 20')
#tMres20_30 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: > 20}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres20_30.SetNDC()
tMres20_30.Draw()
pad7.cd()
h1tev_at13tev_Mres10_30= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres10_30",21,61)
h1tev_at13tev_Mres10_30.SetLineColor(38)
h1tev_at13tev_Mres10_30.SetLineWidth(2)
Mres10_30 = TF1("Mres10_30","gaus", -0.03, 0.03)
h1tev_at13tev_Mres10_30.Fit('Mres10_30', 'R')
h1tev_at13tev_Mres10_30.Draw("histo")
h1tev_at13tev_Mres10_30.GetXaxis().SetTitle("dil. M rel. resolution")
Mres10_30.SetLineColor(4)
Mres10_30.SetLineWidth(1)
Mres10_30.Draw("same")
par[0]=float(h1tev_at13tev_Mres10_30.GetRMS())
par[1]=float(Mres10_30.GetParameter(2))
tMres10_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 10')
#tMres10_30 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: > 10}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres10_30.SetNDC()
tMres10_30.Draw()
pad8.cd()
h1tev_at13tev_Mres15_30= h1tev_at13tev_MassResVSvtxChi2.ProjectionY("h1tev_at13tev_Mres15_30",31,61)
h1tev_at13tev_Mres15_30.SetLineColor(38)
h1tev_at13tev_Mres15_30.SetLineWidth(2)
Mres15_30 = TF1("Mres15_30","gaus",  -0.03, 0.03)
h1tev_at13tev_Mres15_30.Fit('Mres15_30', 'R')
h1tev_at13tev_Mres15_30.Draw("histo")
h1tev_at13tev_Mres15_30.GetXaxis().SetTitle("dil. M rel. resolution")
Mres15_30.SetLineColor(4)
Mres15_30.SetLineWidth(1)
Mres15_30.Draw("same")
par[0]=float(h1tev_at13tev_Mres15_30.GetRMS())
par[1]=float(Mres15_30.GetParameter(2))
tMres15_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 15')
#tMres15_30 = ROOT.TLatex(0.15, 0.8, '#splitline{#chi^{2}/dof: > 15}{#splitline{RMS=%.3f }{#sigma=%.3f }}' %tuple(par) )
tMres15_30.SetNDC()
tMres15_30.Draw()
c_MRes_Slice.Print('ABSDY120RES_Mres_sliceChi2.pdf')

c_dxy_Slice = ROOT.TCanvas( 'c_dxy_Slice', '')
pad1 = TPad( 'pad1', '', 0.02, 0.67, 0.32, 0.99)
pad2 = TPad( 'pad2', '', 0.34, 0.67, 0.66, 0.99)
pad3 = TPad( 'pad3', '', 0.67, 0.67, 0.99, 0.99)
pad4 = TPad( 'pad4', '', 0.02, 0.34, 0.32, 0.66)
pad5 = TPad( 'pad5', '', 0.34, 0.34, 0.66, 0.66)
pad6 = TPad( 'pad6', '', 0.67, 0.34, 0.99, 0.66)
pad7 = TPad( 'pad7', '', 0.02, 0.02, 0.32, 0.32)
pad8 = TPad( 'pad8', '', 0.34, 0.02, 0.66, 0.32)
pad9 = TPad( 'pad9', '', 0.67, 0.02, 0.99, 0.32)
pad1.Draw()
pad2.Draw()
pad3.Draw()
pad4.Draw()
pad5.Draw()
pad6.Draw()
pad7.Draw()
pad8.Draw()
pad9.Draw()
h1tev_at13tev_dxyVSvtxChi2.Rebin2D(5,1)
pad1.cd()
#pad1.SetLogy()
h1tev_at13tev_dxy0_3= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy0_3",0,6)
h1tev_at13tev_dxy0_3.SetLineColor(38)
h1tev_at13tev_dxy0_3.SetLineWidth(2)
h1tev_at13tev_dxy0_3.Draw("histo")
h1tev_at13tev_dxy0_3.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy0_3.GetXaxis().SetRangeUser(0,0.11)
tdxy0_3 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 0 #divide 3')
tdxy0_3.SetNDC()
tdxy0_3.Draw()
pad2.cd()
h1tev_at13tev_dxy3_5= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy3_5",7,10)
h1tev_at13tev_dxy3_5.SetLineColor(38)
h1tev_at13tev_dxy3_5.SetLineWidth(2)
h1tev_at13tev_dxy3_5.Draw("histo")
h1tev_at13tev_dxy3_5.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy3_5.GetXaxis().SetRangeUser(0,0.11)
tdxy3_5 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 3 #divide 5')
tdxy3_5.SetNDC()
tdxy3_5.Draw()
pad3.cd()
h1tev_at13tev_dxy5_10= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy5_10",11,20)
h1tev_at13tev_dxy5_10.SetLineColor(38)
h1tev_at13tev_dxy5_10.SetLineWidth(2)
h1tev_at13tev_dxy5_10.Draw("histo")
h1tev_at13tev_dxy5_10.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy5_10.GetXaxis().SetRangeUser(0,0.11)
tdxy5_10 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 5 #divide 10')
tdxy5_10.SetNDC()
tdxy5_10.Draw()
pad4.cd()
h1tev_at13tev_dxy10_15= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy10_15",21,30)
h1tev_at13tev_dxy10_15.SetLineColor(38)
h1tev_at13tev_dxy10_15.SetLineWidth(2)
h1tev_at13tev_dxy10_15.Draw("histo")
h1tev_at13tev_dxy10_15.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy10_15.GetXaxis().SetRangeUser(0,0.11)
tdxy10_15 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 10 #divide 15')
tdxy10_15.SetNDC()
tdxy10_15.Draw()
pad5.cd()
h1tev_at13tev_dxy15_20= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy15_20",31,40)
h1tev_at13tev_dxy15_20.SetLineColor(38)
h1tev_at13tev_dxy15_20.SetLineWidth(2)
h1tev_at13tev_dxy15_20.Draw("histo")
h1tev_at13tev_dxy15_20.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy15_20.GetXaxis().SetRangeUser(0,0.11)
tdxy15_20 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 15 #divide 20')
tdxy15_20.SetNDC()
tdxy15_20.Draw()
pad6.cd()
h1tev_at13tev_dxy20_30= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy20_30",41,61)
h1tev_at13tev_dxy20_30.SetLineColor(38)
h1tev_at13tev_dxy20_30.SetLineWidth(2)
h1tev_at13tev_dxy20_30.Draw("histo")
h1tev_at13tev_dxy20_30.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy20_30.GetXaxis().SetRangeUser(0,0.11)
tdxy20_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 20')
tdxy20_30.SetNDC()
tdxy20_30.Draw()
pad7.cd()
h1tev_at13tev_dxy10_30= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy10_30",21,61)
h1tev_at13tev_dxy10_30.SetLineColor(38)
h1tev_at13tev_dxy10_30.SetLineWidth(2)
h1tev_at13tev_dxy10_30.Draw("histo")
h1tev_at13tev_dxy10_30.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy10_30.GetXaxis().SetRangeUser(0,0.11)
tdxy10_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 10')
tdxy10_30.SetNDC()
tdxy10_30.Draw()
pad8.cd()
h1tev_at13tev_dxy15_30= h1tev_at13tev_dxyVSvtxChi2.ProjectionY("h1tev_at13tev_dxy15_30",31,61)
h1tev_at13tev_dxy15_30.SetLineColor(38)
h1tev_at13tev_dxy15_30.SetLineWidth(2)
h1tev_at13tev_dxy15_30.Draw("histo")
h1tev_at13tev_dxy15_30.GetXaxis().SetTitle("|dxy(reco trk,gen vtx)|")
h1tev_at13tev_dxy15_30.GetXaxis().SetRangeUser(0,0.11)
tdxy15_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 15')
tdxy15_30.SetNDC()
tdxy15_30.Draw()
c_dxy_Slice.Print('ABSDY120RES_dxy_sliceChi2.pdf')

c_dz_Slice = ROOT.TCanvas( 'c_dz_Slice', '')
pad1 = TPad( 'pad1', '', 0.02, 0.67, 0.32, 0.99)
pad2 = TPad( 'pad2', '', 0.34, 0.67, 0.66, 0.99)
pad3 = TPad( 'pad3', '', 0.67, 0.67, 0.99, 0.99)
pad4 = TPad( 'pad4', '', 0.02, 0.34, 0.32, 0.66)
pad5 = TPad( 'pad5', '', 0.34, 0.34, 0.66, 0.66)
pad6 = TPad( 'pad6', '', 0.67, 0.34, 0.99, 0.66)
pad7 = TPad( 'pad7', '', 0.02, 0.02, 0.32, 0.32)
pad8 = TPad( 'pad8', '', 0.34, 0.02, 0.66, 0.32)
pad9 = TPad( 'pad9', '', 0.67, 0.02, 0.99, 0.32)
pad1.Draw()
pad2.Draw()
pad3.Draw()
pad4.Draw()
pad5.Draw()
pad6.Draw()
pad7.Draw()
pad8.Draw()
pad9.Draw()
h1tev_at13tev_dzVSvtxChi2.Rebin2D(5,1)
pad1.cd()
#pad1.SetLogy()
h1tev_at13tev_dz0_3= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz0_3",0,6)
h1tev_at13tev_dz0_3.SetLineColor(38)
h1tev_at13tev_dz0_3.SetLineWidth(2)
h1tev_at13tev_dz0_3.Draw("histo")
h1tev_at13tev_dz0_3.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz0_3 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 0 #divide 3')
tdz0_3.SetNDC()
tdz0_3.Draw()
pad2.cd()
h1tev_at13tev_dz3_5= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz3_5",7,10)
h1tev_at13tev_dz3_5.SetLineColor(38)
h1tev_at13tev_dz3_5.SetLineWidth(2)
h1tev_at13tev_dz3_5.Draw("histo")
h1tev_at13tev_dz3_5.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz3_5 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 3 #divide 5')
tdz3_5.SetNDC()
tdz3_5.Draw()
pad3.cd()
h1tev_at13tev_dz5_10= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz5_10",11,20)
h1tev_at13tev_dz5_10.SetLineColor(38)
h1tev_at13tev_dz5_10.SetLineWidth(2)
h1tev_at13tev_dz5_10.Draw("histo")
h1tev_at13tev_dz5_10.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz5_10 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 5 #divide 10')
tdz5_10.SetNDC()
tdz5_10.Draw()
pad4.cd()
h1tev_at13tev_dz10_15= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz10_15",21,30)
h1tev_at13tev_dz10_15.SetLineColor(38)
h1tev_at13tev_dz10_15.SetLineWidth(2)
h1tev_at13tev_dz10_15.Draw("histo")
h1tev_at13tev_dz10_15.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz10_15 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 10 #divide 15')
tdz10_15.SetNDC()
tdz10_15.Draw()
pad5.cd()
h1tev_at13tev_dz15_20= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz15_20",31,40)
h1tev_at13tev_dz15_20.SetLineColor(38)
h1tev_at13tev_dz15_20.SetLineWidth(2)
h1tev_at13tev_dz15_20.Draw("histo")
h1tev_at13tev_dz15_20.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz15_20 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: 15 #divide 20')
tdz15_20.SetNDC()
tdz15_20.Draw()
pad6.cd()
h1tev_at13tev_dz20_30= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz20_30",41,61)
h1tev_at13tev_dz20_30.SetLineColor(38)
h1tev_at13tev_dz20_30.SetLineWidth(2)
h1tev_at13tev_dz20_30.Draw("histo")
h1tev_at13tev_dz20_30.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz20_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 20')
tdz20_30.SetNDC()
tdz20_30.Draw()
pad7.cd()
h1tev_at13tev_dz10_30= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz10_30",21,61)
h1tev_at13tev_dz10_30.SetLineColor(38)
h1tev_at13tev_dz10_30.SetLineWidth(2)
h1tev_at13tev_dz10_30.Draw("histo")
h1tev_at13tev_dz10_30.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz10_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 10')
tdz10_30.SetNDC()
tdz10_30.Draw()
pad8.cd()
h1tev_at13tev_dz15_30= h1tev_at13tev_dzVSvtxChi2.ProjectionY("h1tev_at13tev_dz15_30",31,61)
h1tev_at13tev_dz15_30.SetLineColor(38)
h1tev_at13tev_dz15_30.SetLineWidth(2)
h1tev_at13tev_dz15_30.Draw("histo")
h1tev_at13tev_dz15_30.GetXaxis().SetTitle("|dz(reco trk,gen vtx)|")
tdz15_30 = ROOT.TLatex(0.15, 0.8, '#chi^{2}/dof: > 15')
tdz15_30.SetNDC()
tdz15_30.Draw()
c_dz_Slice.Print('ABSDY120RES_dz_sliceChi2.pdf')

#c_Pt = ROOT.TCanvas( 'c_Pt', '')
#pad1 = TPad( 'pad1', '', 0.03, 0.50, 0.48, 0.95)
#pad2 = TPad( 'pad2', '', 0.50, 0.50, 0.98, 0.95)
#pad3 = TPad( 'pad3', '', 0.03, 0.02, 0.48, 0.48)
#pad4 = TPad( 'pad4', '', 0.50, 0.02, 0.98, 0.48)
#pad1.Draw()
#pad2.Draw()
#pad3.Draw()
#pad4.Draw()
#pad1.cd()
##pad1.SetLogy()
#h1tev_at8tev_PtBB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtBB.Scale(1/nGen_13tev)
##h1tev_at8tev_PtBB.Rebin(20)
##h1tev_at13tev_PtBB.Rebin(20)
#h1tev_at8tev_PtBB.SetLineColor(1)
#h1tev_at8tev_PtBB.SetLineWidth(2)
#h1tev_at13tev_PtBB.SetLineColor(2)
#h1tev_at13tev_PtBB.SetLineWidth(2)
#h1tev_at8tev_PtBB.GetXaxis().SetRangeUser(0,500)
#h1tev_at8tev_PtBB.Draw("histo")
#h1tev_at13tev_PtBB.Draw("same histo")
#pad2.cd()
#h1tev_at8tev_PtEE.Scale(1/nGen_8tev)
#h1tev_at13tev_PtEE.Scale(1/nGen_13tev)
##h1tev_at8tev_PtEE.Rebin(20)
##h1tev_at13tev_PtEE.Rebin(20)
#h1tev_at8tev_PtEE.SetLineColor(1)
#h1tev_at8tev_PtEE.SetLineWidth(2)
#h1tev_at13tev_PtEE.SetLineColor(2)
#h1tev_at13tev_PtEE.SetLineWidth(2)
#h1tev_at8tev_PtEE.GetXaxis().SetRangeUser(0,500)
#h1tev_at8tev_PtEE.Draw("histo")
#h1tev_at13tev_PtEE.Draw("same histo")
#pad3.cd()
#h1tev_at8tev_PtEB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtEB.Scale(1/nGen_13tev)
##h1tev_at8tev_PtEB.Rebin(20)
##h1tev_at13tev_PtEB.Rebin(20)
#h1tev_at8tev_PtEB.SetLineColor(1)
#h1tev_at8tev_PtEB.SetLineWidth(2)
#h1tev_at13tev_PtEB.SetLineColor(2)
#h1tev_at13tev_PtEB.SetLineWidth(2)
#h1tev_at13tev_PtEB.GetXaxis().SetRangeUser(0,500)
#h1tev_at13tev_PtEB.Draw("histo")
#h1tev_at8tev_PtEB.Draw("same histo")
#c_Pt.Print('ABSDY120RESsuperimposition_Pt.pdf')
#
#par=[0,0]
#parPull=[0,0,0,0]
#print "PTRES"
#c_PtRes = ROOT.TCanvas( 'c_PtRes', '')
#pad1 = TPad( 'pad1', '', 0.03, 0.50, 0.48, 0.95)
#pad2 = TPad( 'pad2', '', 0.50, 0.50, 0.98, 0.95)
#pad3 = TPad( 'pad3', '', 0.03, 0.02, 0.48, 0.48)
#pad4 = TPad( 'pad4', '', 0.50, 0.02, 0.98, 0.48)
#pad1.Draw()
#pad2.Draw()
#pad3.Draw()
#pad4.Draw()
#pad1.cd()
##pad1.SetLogy()
#h1tev_at8tev_PtResBB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtResBB.Scale(1/nGen_13tev)
#h1tev_at8tev_PtResBB.SetLineColor(1)
#h1tev_at8tev_PtResBB.SetLineWidth(2)
#h1tev_at13tev_PtResBB.SetLineColor(2)
#h1tev_at13tev_PtResBB.SetLineWidth(2)
#PtResBB_8 = TF1("PtResBB_8","gaus", -0.03, 0.03)
#PtResBB_13 = TF1("PtResBB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_PtResBB.Fit('PtResBB_13', 'R')
#h1tev_at8tev_PtResBB.Fit('PtResBB_8', 'R')
#h1tev_at8tev_PtResBB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_PtResBB.Draw("histo")
#h1tev_at13tev_PtResBB.Draw("same histo")
#PtResBB_8.SetLineColor(4)
#PtResBB_13.SetLineColor(4)
#PtResBB_8.SetLineWidth(1)
#PtResBB_13.SetLineWidth(1)
#PtResBB_8.Draw("same")
#PtResBB_13.Draw("same")
#par[0]=float(PtResBB_8.GetParameter(2))
#par[1]=float(PtResBB_13.GetParameter(2))
#tPtResBB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tPtResBB.SetNDC()
#tPtResBB.Draw()
#
#pad2.cd()
#h1tev_at8tev_PtResEE.Scale(1/nGen_8tev)
#h1tev_at13tev_PtResEE.Scale(1/nGen_13tev)
#h1tev_at8tev_PtResEE.SetLineColor(1)
#h1tev_at8tev_PtResEE.SetLineWidth(2)
#h1tev_at13tev_PtResEE.SetLineColor(2)
#h1tev_at13tev_PtResEE.SetLineWidth(2)
#PtResEE_8 = TF1("PtResEE_8","gaus", -0.03, 0.03)
#PtResEE_13 = TF1("PtResEE_13","gaus", -0.03, 0.03)
#h1tev_at13tev_PtResEE.Fit('PtResEE_13', 'R')
#h1tev_at8tev_PtResEE.Fit('PtResEE_8', 'R')
#h1tev_at13tev_PtResEE.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at13tev_PtResEE.Draw("histo")
#h1tev_at8tev_PtResEE.Draw("same histo")
#PtResEE_8.SetLineColor(4)
#PtResEE_13.SetLineColor(4)
#PtResEE_8.SetLineWidth(1)
#PtResEE_13.SetLineWidth(1)
#PtResEE_8.Draw("same")
#PtResEE_13.Draw("same")
#par[0]=float(PtResEE_8.GetParameter(2))
#par[1]=float(PtResEE_13.GetParameter(2))
#tPtResEE = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tPtResEE.SetNDC()
#tPtResEE.Draw()
#
#pad3.cd()
#h1tev_at8tev_PtResEB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtResEB.Scale(1/nGen_13tev)
#h1tev_at8tev_PtResEB.SetLineColor(1)
#h1tev_at8tev_PtResEB.SetLineWidth(2)
#h1tev_at13tev_PtResEB.SetLineColor(2)
#h1tev_at13tev_PtResEB.SetLineWidth(2)
#PtResEB_8 = TF1("PtResEB_8","gaus", -0.03, 0.03)
#PtResEB_13 = TF1("PtResEB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_PtResEB.Fit('PtResEB_13', 'R')
#h1tev_at8tev_PtResEB.Fit('PtResEB_8', 'R')
#h1tev_at8tev_PtResEB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_PtResEB.Draw("histo")
#h1tev_at13tev_PtResEB.Draw("same histo")
#PtResEB_8.SetLineColor(4)
#PtResEB_13.SetLineColor(4)
#PtResEB_8.SetLineWidth(1)
#PtResEB_13.SetLineWidth(1)
#PtResEB_8.Draw("same")
#PtResEB_13.Draw("same")
#par[0]=float(PtResEB_8.GetParameter(2))
#par[1]=float(PtResEB_13.GetParameter(2))
#tPtResEB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tPtResEB.SetNDC()
#tPtResEB.Draw()
#
#c_PtRes.Print('ABSDY120RESsuperimposition_PtRes.pdf')
#print "INVPTRES"
#c_InvPtRes = ROOT.TCanvas( 'c_InvPtRes', '')
#pad1 = TPad( 'pad1', '', 0.03, 0.50, 0.48, 0.95)
#pad2 = TPad( 'pad2', '', 0.50, 0.50, 0.98, 0.95)
#pad3 = TPad( 'pad3', '', 0.03, 0.02, 0.48, 0.48)
#pad4 = TPad( 'pad4', '', 0.50, 0.02, 0.98, 0.48)
#pad1.Draw()
#pad2.Draw()
#pad3.Draw()
#pad4.Draw()
#pad1.cd()
##pad1.SetLogy()
#h1tev_at8tev_InvPtResBB.Scale(1/nGen_8tev)
#h1tev_at13tev_InvPtResBB.Scale(1/nGen_13tev)
#h1tev_at8tev_InvPtResBB.SetLineColor(1)
#h1tev_at8tev_InvPtResBB.SetLineWidth(2)
#h1tev_at13tev_InvPtResBB.SetLineColor(2)
#h1tev_at13tev_InvPtResBB.SetLineWidth(2)
#InvPtResBB_8 = TF1("InvPtResBB_8","gaus", -0.03, 0.03)
#InvPtResBB_13 = TF1("InvPtResBB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_InvPtResBB.Fit('InvPtResBB_13', 'R')
#h1tev_at8tev_InvPtResBB.Fit('InvPtResBB_8', 'R')
#h1tev_at8tev_InvPtResBB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_InvPtResBB.Draw("histo")
#h1tev_at13tev_InvPtResBB.Draw("same histo")
#InvPtResBB_8.SetLineColor(4)
#InvPtResBB_13.SetLineColor(4)
#InvPtResBB_8.SetLineWidth(1)
#InvPtResBB_13.SetLineWidth(1)
#InvPtResBB_8.Draw("same")
#InvPtResBB_13.Draw("same")
#par[0]=float(InvPtResBB_8.GetParameter(2))
#par[1]=float(InvPtResBB_13.GetParameter(2))
#tInvPtResBB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tInvPtResBB.SetNDC()
#tInvPtResBB.Draw()
#
#pad2.cd()
#h1tev_at8tev_InvPtResEE.Scale(1/nGen_8tev)
#h1tev_at13tev_InvPtResEE.Scale(1/nGen_13tev)
#h1tev_at8tev_InvPtResEE.SetLineColor(1)
#h1tev_at8tev_InvPtResEE.SetLineWidth(2)
#h1tev_at13tev_InvPtResEE.SetLineColor(2)
#h1tev_at13tev_InvPtResEE.SetLineWidth(2)
#InvPtResEE_8 = TF1("InvPtResEE_8","gaus", -0.03, 0.03)
#InvPtResEE_13 = TF1("InvPtResEE_13","gaus", -0.03, 0.03)
#h1tev_at13tev_InvPtResEE.Fit('InvPtResEE_13', 'R')
#h1tev_at8tev_InvPtResEE.Fit('InvPtResEE_8', 'R')
#h1tev_at13tev_InvPtResEE.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at13tev_InvPtResEE.Draw("histo")
#h1tev_at8tev_InvPtResEE.Draw("same histo")
#InvPtResEE_8.SetLineColor(4)
#InvPtResEE_13.SetLineColor(4)
#InvPtResEE_8.SetLineWidth(1)
#InvPtResEE_13.SetLineWidth(1)
#InvPtResEE_8.Draw("same")
#InvPtResEE_13.Draw("same")
#par[0]=float(InvPtResEE_8.GetParameter(2))
#par[1]=float(InvPtResEE_13.GetParameter(2))
#tInvPtResEE = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tInvPtResEE.SetNDC()
#tInvPtResEE.Draw()
#
#pad3.cd()
#h1tev_at8tev_InvPtResEB.Scale(1/nGen_8tev)
#h1tev_at13tev_InvPtResEB.Scale(1/nGen_13tev)
#h1tev_at8tev_InvPtResEB.SetLineColor(1)
#h1tev_at8tev_InvPtResEB.SetLineWidth(2)
#h1tev_at13tev_InvPtResEB.SetLineColor(2)
#h1tev_at13tev_InvPtResEB.SetLineWidth(2)
#InvPtResEB_8 = TF1("InvPtResEB_8","gaus", -0.03, 0.03)
#InvPtResEB_13 = TF1("InvPtResEB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_InvPtResEB.Fit('InvPtResEB_13', 'R')
#h1tev_at8tev_InvPtResEB.Fit('InvPtResEB_8', 'R')
#h1tev_at8tev_InvPtResEB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_InvPtResEB.Draw("histo")
#h1tev_at13tev_InvPtResEB.Draw("same histo")
#InvPtResEB_8.SetLineColor(4)
#InvPtResEB_13.SetLineColor(4)
#InvPtResEB_8.SetLineWidth(1)
#InvPtResEB_13.SetLineWidth(1)
#InvPtResEB_8.Draw("same")
#InvPtResEB_13.Draw("same")
#par[0]=float(InvPtResEB_8.GetParameter(2))
#par[1]=float(InvPtResEB_13.GetParameter(2))
#tInvPtResEB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tInvPtResEB.SetNDC()
#tInvPtResEB.Draw()
#
#c_InvPtRes.Print('ABSDY120RESsuperimposition_InvPtRes.pdf')
#print "PULL"
#c_Pt = ROOT.TCanvas( 'c_PtPull', '')
#pad1 = TPad( 'pad1', '', 0.03, 0.50, 0.48, 0.95)
#pad2 = TPad( 'pad2', '', 0.50, 0.50, 0.98, 0.95)
#pad3 = TPad( 'pad3', '', 0.03, 0.02, 0.48, 0.48)
#pad4 = TPad( 'pad4', '', 0.50, 0.02, 0.98, 0.48)
#pad1.Draw()
#pad2.Draw()
#pad3.Draw()
#pad4.Draw()
#pad1.cd()
##pad1.SetLogy()
#h1tev_at8tev_PtPullBB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtPullBB.Scale(1/nGen_13tev)
#h1tev_at8tev_PtPullBB.SetLineColor(1)
#h1tev_at8tev_PtPullBB.SetLineWidth(2)
#h1tev_at13tev_PtPullBB.SetLineColor(2)
#h1tev_at13tev_PtPullBB.SetLineWidth(2)
#PtPullBB_8 = TF1("PtPullBB_8","gaus", -2, 2)
#PtPullBB_13 = TF1("PtPullBB_13","gaus", -2, 2)
#h1tev_at13tev_PtPullBB.Fit('PtPullBB_13', 'R')
#h1tev_at8tev_PtPullBB.Fit('PtPullBB_8', 'R')
#h1tev_at13tev_PtPullBB.Draw("histo")
#h1tev_at8tev_PtPullBB.Draw("same histo")
#PtPullBB_8.SetLineColor(4)
#PtPullBB_13.SetLineColor(4)
#PtPullBB_8.SetLineWidth(1)
#PtPullBB_13.SetLineWidth(1)
#PtPullBB_8.Draw("same")
#PtPullBB_13.Draw("same")
#parPull[0]=float(h1tev_at8tev_PtPullBB.GetRMS())
#parPull[1]=float(h1tev_at13tev_PtPullBB.GetRMS())
#parPull[2]=float(PtPullBB_8.GetParameter(2))
#parPull[3]=float(PtPullBB_13.GetParameter(2))
#tPtPullBB = ROOT.TLatex(0.15, 0.8, '#splitline{#splitline{8TeV: RMS=%.2f }{#color[2]{13TeV: RMS=%.2f}}}{#splitline{8TeV: #sigma=%.2f }{#color[2]{13TeV: #sigma=%.2f}} }' %tuple(parPull) )
#tPtPullBB.SetNDC()
#tPtPullBB.Draw()
#pad2.cd()
#h1tev_at8tev_PtPullEE.Scale(1/nGen_8tev)
#h1tev_at13tev_PtPullEE.Scale(1/nGen_13tev)
##h1tev_at8tev_PtPullEE.Rebin(20)
##h1tev_at13tev_PtPullEE.Rebin(20)
#h1tev_at8tev_PtPullEE.SetLineColor(1)
#h1tev_at8tev_PtPullEE.SetLineWidth(2)
#h1tev_at13tev_PtPullEE.SetLineColor(2)
#h1tev_at13tev_PtPullEE.SetLineWidth(2)
#PtPullEE_8 = TF1("PtPullEE_8","gaus", -2, 2)
#PtPullEE_13 = TF1("PtPullEE_13","gaus", -2, 2)
#h1tev_at13tev_PtPullEE.Fit('PtPullEE_13', 'R')
#h1tev_at8tev_PtPullEE.Fit('PtPullEE_8', 'R')
#h1tev_at13tev_PtPullEE.Draw("histo")
#h1tev_at8tev_PtPullEE.Draw("same histo")
#PtPullEE_8.SetLineColor(4)
#PtPullEE_13.SetLineColor(4)
#PtPullEE_8.SetLineWidth(1)
#PtPullEE_13.SetLineWidth(1)
#PtPullEE_8.Draw("same")
#PtPullEE_13.Draw("same")
#parPull[0]=float(h1tev_at8tev_PtPullEE.GetRMS())
#parPull[1]=float(h1tev_at13tev_PtPullEE.GetRMS())
#parPull[2]=float(PtPullEE_8.GetParameter(2))
#parPull[3]=float(PtPullEE_13.GetParameter(2))
#tPtPullEE = ROOT.TLatex(0.15, 0.8, '#splitline{#splitline{8TeV: RMS=%.2f }{#color[2]{13TeV: RMS=%.2f}}}{#splitline{8TeV: #sigma=%.2f }{#color[2]{13TeV: #sigma=%.2f}} }' %tuple(parPull) )
#tPtPullEE.SetNDC()
#tPtPullEE.Draw()
#pad3.cd()
#h1tev_at8tev_PtPullEB.Scale(1/nGen_8tev)
#h1tev_at13tev_PtPullEB.Scale(1/nGen_13tev)
##h1tev_at8tev_PtPullEB.Rebin(20)
##h1tev_at13tev_PtPullEB.Rebin(20)
#h1tev_at8tev_PtPullEB.SetLineColor(1)
#h1tev_at8tev_PtPullEB.SetLineWidth(2)
#h1tev_at13tev_PtPullEB.SetLineColor(2)
#h1tev_at13tev_PtPullEB.SetLineWidth(2)
#PtPullEB_8 = TF1("PtPullEB_8","gaus", -2, 2)
#PtPullEB_13 = TF1("PtPullEB_13","gaus", -2, 2)
#h1tev_at13tev_PtPullEB.Fit('PtPullEB_13', 'R')
#h1tev_at8tev_PtPullEB.Fit('PtPullEB_8', 'R')
#h1tev_at13tev_PtPullEB.Draw("histo")
#h1tev_at8tev_PtPullEB.Draw("same histo")
#PtPullEB_8.SetLineColor(4)
#PtPullEB_13.SetLineColor(4)
#PtPullEB_8.SetLineWidth(1)
#PtPullEB_13.SetLineWidth(1)
#PtPullEB_8.Draw("same")
#PtPullEB_13.Draw("same")
#parPull[0]=float(h1tev_at8tev_PtPullEB.GetRMS())
#parPull[1]=float(h1tev_at13tev_PtPullEB.GetRMS())
#parPull[2]=float(PtPullEB_8.GetParameter(2))
#parPull[3]=float(PtPullEB_13.GetParameter(2))
#tPtPullEB = ROOT.TLatex(0.15, 0.8, '#splitline{#splitline{8TeV: RMS=%.2f }{#color[2]{13TeV: RMS=%.2f}}}{#splitline{8TeV: #sigma=%.2f }{#color[2]{13TeV: #sigma=%.2f}} }' %tuple(parPull) )
#tPtPullEB.SetNDC()
#tPtPullEB.Draw()
#c_PtPull.Print('ABSDY120RESsuperimposition_PtPull.pdf')
#print "MRES"
#c_mRes = ROOT.TCanvas( 'c_mRes', '')
#pad1 = TPad( 'pad1', '', 0.03, 0.50, 0.48, 0.95)
#pad2 = TPad( 'pad2', '', 0.50, 0.50, 0.98, 0.95)
#pad3 = TPad( 'pad3', '', 0.03, 0.02, 0.48, 0.48)
#pad4 = TPad( 'pad4', '', 0.50, 0.02, 0.98, 0.48)
#pad1.Draw()
#pad2.Draw()
#pad3.Draw()
#pad4.Draw()
#pad1.cd()
##pad1.SetLogy()
#h1tev_at8tev_MresBB.Scale(1/nGen_8tev)
#h1tev_at13tev_MresBB.Scale(1/nGen_13tev)
#h1tev_at8tev_MresBB.SetLineColor(1)
#h1tev_at8tev_MresBB.SetLineWidth(2)
#h1tev_at13tev_MresBB.SetLineColor(2)
#h1tev_at13tev_MresBB.SetLineWidth(2)
#MresBB_8 = TF1("MresBB_8","gaus", -0.03, 0.03)
#MresBB_13 = TF1("MresBB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_MresBB.Fit('MresBB_13', 'R')
#h1tev_at8tev_MresBB.Fit('MresBB_8', 'R')
#h1tev_at8tev_MresBB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_MresBB.Draw("histo")
#h1tev_at13tev_MresBB.Draw("same histo")
#MresBB_8.SetLineColor(4)
#MresBB_13.SetLineColor(4)
#MresBB_8.SetLineWidth(1)
#MresBB_13.SetLineWidth(1)
#MresBB_8.Draw("same")
#MresBB_13.Draw("same")
#par[0]=float(MresBB_8.GetParameter(2))
#par[1]=float(MresBB_13.GetParameter(2))
#tMresBB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tMresBB.SetNDC()
#tMresBB.Draw()
#pad2.cd()
#h1tev_at8tev_MresEE.Scale(1/nGen_8tev)
#h1tev_at13tev_MresEE.Scale(1/nGen_13tev)
#h1tev_at8tev_MresEE.SetLineColor(1)
#h1tev_at8tev_MresEE.SetLineWidth(2)
#h1tev_at13tev_MresEE.SetLineColor(2)
#h1tev_at13tev_MresEE.SetLineWidth(2)
#MresEE_8 = TF1("MresEE_8","gaus", -0.03, 0.03)
#MresEE_13 = TF1("MresEE_13","gaus", -0.03, 0.03)
#h1tev_at13tev_MresEE.Fit('MresEE_13', 'R')
#h1tev_at8tev_MresEE.Fit('MresEE_8', 'R')
#h1tev_at8tev_MresEE.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_MresEE.Draw("histo")
#h1tev_at13tev_MresEE.Draw("same histo")
#MresEE_8.SetLineColor(4)
#MresEE_13.SetLineColor(4)
#MresEE_8.SetLineWidth(1)
#MresEE_13.SetLineWidth(1)
#MresEE_8.Draw("same")
#MresEE_13.Draw("same")
#par[0]=float(MresEE_8.GetParameter(2))
#par[1]=float(MresEE_13.GetParameter(2))
#tMresEE = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tMresEE.SetNDC()
#tMresEE.Draw()
#pad3.cd()
#h1tev_at8tev_MresEB.Scale(1/nGen_8tev)
#h1tev_at13tev_MresEB.Scale(1/nGen_13tev)
#h1tev_at8tev_MresEB.SetLineColor(1)
#h1tev_at8tev_MresEB.SetLineWidth(2)
#h1tev_at13tev_MresEB.SetLineColor(2)
#h1tev_at13tev_MresEB.SetLineWidth(2)
#MresEB_8 = TF1("MresEB_8","gaus", -0.03, 0.03)
#MresEB_13 = TF1("MresEB_13","gaus", -0.03, 0.03)
#h1tev_at13tev_MresEB.Fit('MresEB_13', 'R')
#h1tev_at8tev_MresEB.Fit('MresEB_8', 'R')
#h1tev_at8tev_MresEB.GetXaxis().SetRangeUser(-0.3,0.3)
#h1tev_at8tev_MresEB.Draw("histo")
#h1tev_at13tev_MresEB.Draw("same histo")
#MresEB_8.SetLineColor(4)
#MresEB_13.SetLineColor(4)
#MresEB_8.SetLineWidth(1)
#MresEB_13.SetLineWidth(1)
#MresEB_8.Draw("same")
#MresEB_13.Draw("same")
#par[0]=float(MresEB_8.GetParameter(2))
#par[1]=float(MresEB_13.GetParameter(2))
#tMresEB = ROOT.TLatex(0.15, 0.8, '#splitline{8TeV: #sigma=%.4f }{#color[2]{13TeV: #sigma=%.4f} }' %tuple(par) )
#tMresEB.SetNDC()
#tMresEB.Draw()
#c_mRes.Print('ABSDY120RESsuperimposition_MRes.pdf')
